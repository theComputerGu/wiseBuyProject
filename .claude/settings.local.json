{
  "permissions": {
    "allow": [
      "Bash(\"c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\venv\\\\Scripts\\\\python.exe\" -c \"import sys; sys.path.insert\\(0, r''c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\Webscrapers''\\); from recommendation_engine import get_recommendations; import json; data = {''cartProductIds'': [], ''allShoppingLists'': [{''items'': [{''productId'': ''a''}, {''productId'': ''b''}]}, {''items'': [{''productId'': ''a''}, {''productId'': ''c''}]}], ''userHistory'': [{''productId'': ''a'', ''purchasedAt'': ''2025-12-20T10:00:00Z''}], ''allPurchases'': [{''productId'': ''b'', ''purchasedAt'': ''2025-12-25T10:00:00Z''}], ''limit'': 5}; print\\(json.dumps\\(get_recommendations\\(data\\), ensure_ascii=False, indent=2\\)\\)\")",
      "Bash(\"c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\venv\\\\Scripts\\\\python.exe\" -c:*)",
      "Bash(\"c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\venv\\\\Scripts\\\\python.exe\" -c \"\nimport sys\nsys.path.insert\\(0, r''c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\Webscrapers''\\)\nfrom recommendation_engine import ml_predict, get_recommendations\nimport json\n\nuser_history = [\n    {''productId'': ''milk1'', ''purchasedAt'': ''2025-12-20T10:00:00Z'', ''category'': ''dairy''},\n    {''productId'': ''milk1'', ''purchasedAt'': ''2025-12-13T10:00:00Z'', ''category'': ''dairy''},\n    {''productId'': ''bread1'', ''purchasedAt'': ''2025-12-22T10:00:00Z'', ''category'': ''bread''},\n    {''productId'': ''eggs1'', ''purchasedAt'': ''2025-12-15T10:00:00Z'', ''category'': ''eggs''},\n    {''productId'': ''cheese1'', ''purchasedAt'': ''2025-12-18T10:00:00Z'', ''category'': ''dairy''},\n]\n\nall_purchases = [\n    {''productId'': ''milk1'', ''purchasedAt'': ''2025-12-20T10:00:00Z''},\n    {''productId'': ''bread1'', ''purchasedAt'': ''2025-12-22T10:00:00Z''},\n    {''productId'': ''eggs1'', ''purchasedAt'': ''2025-12-15T10:00:00Z''},\n    {''productId'': ''cheese1'', ''purchasedAt'': ''2025-12-18T10:00:00Z''},\n    {''productId'': ''butter1'', ''purchasedAt'': ''2025-12-19T10:00:00Z''},\n    {''productId'': ''yogurt1'', ''purchasedAt'': ''2025-12-21T10:00:00Z''},\n    {''productId'': ''juice1'', ''purchasedAt'': ''2025-12-20T10:00:00Z''},\n    {''productId'': ''cream1'', ''purchasedAt'': ''2025-12-17T10:00:00Z''},\n]\n\nall_products = [''milk1'', ''bread1'', ''eggs1'', ''cheese1'', ''butter1'', ''yogurt1'', ''juice1'', ''cream1'', ''cereal1'', ''coffee1'']\n\nprint\\(''=== ML Predict Direct ===''\\)\nresult = ml_predict\\(user_history, all_purchases, all_products, limit=10\\)\nprint\\(json.dumps\\(result, ensure_ascii=False, indent=2\\)\\)\n\nprint\\(\\)\nprint\\(''=== Full Recommendations ===''\\)\ndata = {\n    ''cartProductIds'': [],\n    ''allShoppingLists'': [{''items'': [{''productId'': ''milk1''}, {''productId'': ''bread1''}]}],\n    ''userHistory'': user_history,\n    ''allPurchases'': all_purchases,\n    ''allProducts'': all_products,\n    ''limit'': 10\n}\nresult2 = get_recommendations\\(data\\)\nprint\\(json.dumps\\(result2, ensure_ascii=False, indent=2\\)\\)\n\")",
      "Bash(\"c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\venv\\\\Scripts\\\\python.exe\":*)",
      "Bash(chcp 65001)",
      "Bash(\"c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\venv\\\\Scripts\\\\python.exe\" -c \"\nimport json\nimport sys\nimport io\n\noutput = io.TextIOWrapper\\(sys.stdout.buffer, encoding=''utf-8''\\)\n\n# Load data\nwith open\\(r''c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\data\\\\training_shoppinglists.json'', ''r'', encoding=''utf-8''\\) as f:\n    shopping_lists = json.load\\(f\\)\n\nwith open\\(r''c:\\\\Users\\\\sean\\\\Desktop\\\\WiseBuy\\\\wiseBuyProject\\\\server\\\\data\\\\wisebuy.products.updated3.json'', ''r'', encoding=''utf-8''\\) as f:\n    products = json.load\\(f\\)\n\nproducts_by_id = {p[''_id''][''$oid'']: p for p in products}\n\n# Check what bought_together is doing\n# Pick a sample cart item and see what it recommends\nfrom collections import defaultdict\n\nall_lists = [{''items'': [{''productId'': item[''_id''][''$oid'']} for item in sl[''items'']]} for sl in shopping_lists]\n\n# Build co-occurrence matrix\nco_occurrence = defaultdict\\(lambda: defaultdict\\(int\\)\\)\nfor sl in all_lists:\n    items = sl.get\\(''items'', []\\)\n    pids = [item.get\\(''productId''\\) for item in items if item.get\\(''productId''\\)]\n    for i, pid1 in enumerate\\(pids\\):\n        for pid2 in pids[i+1:]:\n            co_occurrence[pid1][pid2] += 1\n            co_occurrence[pid2][pid1] += 1\n\n# Find a product with high co-occurrence\nsample_pid = list\\(co_occurrence.keys\\(\\)\\)[0]\nsample_product = products_by_id.get\\(sample_pid, {}\\)\noutput.write\\(f''Sample product: {sample_product.get\\(\"\"title\"\", \"\"?\"\"\\)} \\({sample_product.get\\(\"\"category\"\", \"\"?\"\"\\)}\\)''\\)\noutput.write\\(f''\\\\n\\\\nTop co-occurrences:\\\\n''\\)\n\nsorted_pairs = sorted\\(co_occurrence[sample_pid].items\\(\\), key=lambda x: -x[1]\\)[:10]\nfor pid, count in sorted_pairs:\n    other = products_by_id.get\\(pid, {}\\)\n    output.write\\(f''  {count}x - {other.get\\(\"\"title\"\", \"\"?\"\"\\)[:40]} \\({other.get\\(\"\"category\"\", \"\"?\"\"\\)}\\)\\\\n''\\)\n\noutput.flush\\(\\)\n\")"
    ]
  }
}
